var searchForm=document.querySelector(".hotelsearch"),searchFormButton=document.querySelector(".hotel-search-title"),modalFormHidden=document.querySelector(".modal-hidden"),modalFormShow=document.querySelector(".modal-show"),mapBlock=document.querySelector(".map"),dateArrival=searchForm.querySelector("#datearrival"),dateDeparture=searchForm.querySelector("#datedeparture"),numAdults=searchForm.querySelector("#adults"),numChildren=searchForm.querySelector("#children"),savedDateArrival="",savedDateDeparture="",savedNumAdults="",savedNumChildren="",isStorageSupported=!0;try{savedDateArrival=localStorage.getItem("dateArrival"),savedDateDeparture=localStorage.getItem("dateDeparture"),savedNumAdults=localStorage.getItem("numAdults"),savedNumChildren=localStorage.getItem("numChildren")}catch(e){isStorageSupported=!1}modalFormHidden||searchForm&&searchForm.classList.add("modal-hidden"),searchFormButton.addEventListener("click",function(e){e.preventDefault(),searchForm.classList.toggle("modal-hidden"),searchForm.classList.add("modal-show"),mapBlock.classList.toggle("map-back"),modalFormHidden||(dateArrival.focus(),isStorageSupported&&(savedDateArrival&&(dateArrival.value=savedDateArrival,dateDeparture.focus()),savedDateDeparture&&(dateDeparture.value=savedDateDeparture,numAdults.focus()),savedNumAdults&&(numAdults.value=savedNumAdults,numChildren.focus()),savedDateDeparture&&(numChildren.value=savedNumChildren)))}),searchForm.addEventListener("submit",function(e){var r=!1;if(dateArrival.value||(dateArrival.classList.add("validate-error"),r=!0),dateDeparture.value||(dateDeparture.classList.add("validate-error"),r=!0),numAdults.value||(numAdults.classList.add("validate-error"),r=!0),isStorageSupported&&(dateArrival.value&&localStorage.setItem("dateArrival",dateArrival.value),dateDeparture.value&&localStorage.setItem("dateDeparture",dateDeparture.value),numAdults.value&&localStorage.setItem("numAdults",numAdults.value),numChildren.value&&localStorage.setItem("numChildren",numChildren.value)),r)return e.preventDefault(),void searchForm.classList.add("modal-error");isStorageSupported&&localStorage.clear()}),dateArrival.addEventListener("focus",function(){dateArrival.classList.remove("validate-error")}),dateDeparture.addEventListener("focus",function(){dateDeparture.classList.remove("validate-error")}),numAdults.addEventListener("focus",function(){numAdults.classList.remove("validate-error")});var pfx=["webkit","moz","MS","o",""];function PrefixedEvent(e,r,a){for(var t=0;t<pfx.length;t++)pfx[t]||(r=r.toLowerCase()),e.addEventListener(pfx[t]+r,a,!1)}PrefixedEvent(searchForm,"AnimationEnd",function(){searchForm.classList.remove("modal-error"),searchForm.classList.remove("modal-show")});var mousePositionControl=new ol.control.MousePosition({projection:"EPSG:4326",coordinateFormat:function(e){return ol.coordinate.format(e,"{y}, {x}",4)}}),zoomSliderControl=new ol.control.ZoomSlider({minResolution:1e3,maxResolution:25e3}),map=new ol.Map({controls:ol.control.defaults().extend([zoomSliderControl,mousePositionControl,new ol.control.OverviewMap,new ol.control.ScaleLine]),target:"map-sedona"}),osmLayer=new ol.layer.Tile({source:new ol.source.OSM});map.addLayer(osmLayer);var markerSource=new ol.source.Vector,markerStyle=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,38],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.75,src:"img/elements/red-pin.png"})}),iconFeature=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([-111.7765,34.8635])),name:"Седона"});markerSource.addFeature(iconFeature);var markerVectorLayer=new ol.layer.Vector({source:markerSource,style:markerStyle});map.addLayer(markerVectorLayer);var view=new ol.View({center:ol.proj.fromLonLat([-111.7565,34.7475]),zoom:9,minZoom:4,maxZoom:16});map.setView(view);